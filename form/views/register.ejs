<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="logo.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css"
        integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css">
    <link href='https://fonts.googleapis.com/css?family=Rubik' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Varela Round' rel='stylesheet'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <title>Linux Diary 3.0</title>
</head>

<body>
    <div class="wrapper">
        <div class="container">
                <div class="heading">
                    <img class="logo" src="logo.png">
                    <div id="main-title">
                      <label class="title">Walchand Linux Users' Group</label>
                    </div>
                </div>
                <label class="heading-main">LinuxDiary 3.0</label>
                <p class="description">
                  We are here with the series of LINUX DIARY 3.0 . To learn about Linux including various Linux commands, files, processes and much more. 
                  <br/>
                  <br/>
                  <b>Join us to explore and experience the world of LINUX!</b>
                </p>
                <a href="#registration-form"><button class="btn-register">Register Now <i id="register-icon" class="fa fa-play btn-icon"></i></button></a>
                <div class="video-wrapper">
                <video controls autoplay>
                    <source src="Linux Diary 3.0.mp4" type="video/mp4">
                </video>
              </div>
            <h1 id="prize_head">PRIZES</h1>
            <p id="prize_description">Do participate to win the following prizes!</p>
            <div class="container-fluid" >
            <div class="row">
                <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-12" id="prize-2">
                    <div class="card mb-3">
                        <img src="trophy.png" class="card-img-top" alt="trophy">
                        <div class="card-body">
                          <h2 class="card-title" id="prize_title">Exiciting Swags</h2>
                        </div>
                    </div>
                </div>
                <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-12" id="prize-1">
                    <div class="card mb-3">
                        <img src="github.png" class="card-img-top" alt="github">
                        <div class="card-body">
                          <h2 class="card-title" id="prize_title">Official <br/> Github Merch</h2>
                        </div>
                    </div>
                </div>
                <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-12" id="prize-3">
                    <div class="card mb-3">
                        <img src="coin.png" class="card-img-top" alt="coin">
                        <div class="card-body">
                          <h2 class="card-title" id="prize_title">Cash Prizes</h2>
                        </div>
                    </div>
                </div>
            </div>
           </div>
        <h1 id="session_head">SESSIONS ROADMAP</h1>
        <div class="row" id="session_all-1">
          <div class="col-xxl-3 col-lg-3 col-md-3 col-sm-4" id="left-body_session-1">
            <img src="icons/telegram.png" alt="telegram" id="telegram_img"/>
          </div>
          <div class="col-xxl-9 col-lg-9 col-md-9 col-sm-8" id="right-body_session-1">
            <h2 id="session-name-1">
              Build your Base
            </h2>
            <p id="session-info-1">
              Scared of being an absolute beginner in linux? Don't worry, we will start the event with this beginner-friendly session. It will cover all the basic concepts of Open-Source and Linux, along with real-life applications.
            </p>
            <p id="session-number-1">Session-1</p>
          </div>
        </div>
        <div class="row" id="session_all-2">
          <div class="col-xxl-8 col-lg-8 col-md-8 col-sm-8" id="left-body_session-2">
            <h2 id="session-name-2">
              Level up to Linux
            </h2>
            <p id="session-info-2">
              After building the base strong, we will explore Linux in detail. You will learn about all the fundamental commands, the booting procedure, text editors, various processes and their management.
            </p>
            <br/>
            <p id="session-number-2">Session-2</p>
          </div>
          <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4" id="right-body_session-2">
            <img src="icons/reload.png" alt="reload" id="reload_img"/>
          </div>
        </div>
        <div class="row" id="session_all-3">
            <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-12" id="left-body_session-3">
              <img src="icons/eye.png" alt="eye" id="eye_img"/>
            </div>
            <div class="col-xxl-8 col-lg-8 col-md-8 col-sm-12" id="right-body_session-3">
              <h2 id="session-name-3">
                Everything is a File!
              </h2>
              <p id="session-info-3">
                Surprised? Well, what you read is absolutely true. We'll move forward into this session to explore this more. It will take you through the file system in Linux, different groups, users, and commands related to their management.
              </p>
              <p id="session-number-3">Session-3</p>
            </div>
        </div>
          <div class="row" id="session_all-4">
            <div class="col-xxl-8 col-lg-8 col-md-8 col-sm-12" id="left-body_session-4">
              <h2 id="session-name-4">
                CLI makes Life Easier
                </h2>
                <p id="session-info-4">
                  Finally, we will take a look at what GUI is, how it differs from CLI, and the advantages of CLI over GUI. You will also get to know about advanced commands and networking commands.
                </p>
                <p id="session-number-4">Session-4</p>
            </div>
            <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-12" id="right-body_session-2">
              <img src="icons/thunderbolt.png" alt="thunderbolt" id="thunderbolt_img"/>
            </div>
          </div>
          <div class="form" id="registration-form">
            <h1>Registration-form</h1>
            <br/>
            <div class="container">
              <div class="row">
                <div class="col-xxl-8 col-lg-8 col-md-8 col-sm-12 box" id="left-side_form">
                  <div id="successBox" class="row g-3">
                    <p id="left-side_form-head">Fill the form to begin your registration and be ready to dive into Linux!</p>
                    <div class="col-md-6">
                      <label for="inputFirstName" class="form-label" id="inputFirstName">Full Name <i class="fa-solid fa-user"></i> :</label>
                      <input type="text" id="firstName" class="form-control" placeholder="Enter your full name" required>
                    </div>
                    <div class="col-md-6" id="referal-code-container">
                      <label for="referralCode" class="form-label" id="referralCode">Referral code <i class="fa-solid fa-tag"></i> :</label>
                      <input type="text" id="referral" class="form-control" placeholder="Enter referral code" required>                      
                    </div>
                    <div class="col-md-12">
                      <label for="inputEmail" class="form-label" id="inputEmail">Email <i class="fa-solid fa-envelope"></i> :</label>
                      <input type="email" id="email" class="form-control" placeholder="Enter your email" required>
                    </div>
                    <div class="col-md-12">
                        <label for="inputCollegeName" class="form-label" id="inputCollegeName">College Name <i class="fa-solid fa-building-columns"></i> :</label>
                        <input type="text" id="collegeName" class="form-control" placeholder="Enter your college name" required>
                    </div>
                    <input type="text" id="rzp-text" hidden>
                    <input type="text" id="order-id" hidden>
                    <input type="text" id="order-pay-id" hidden>
                    <input type="text" id="order-sig" hidden>
                    <div class="d-grid gap-6 col-3 mx-auto" id="register-button">
                        <br/>
                      <button class="btn btn-primary" id="button_text">Register</button>
                    </div>
                    <script>
                        document.getElementById("button_text").onclick = function(e) {

                          var name = document.getElementById('firstName').value;
                          var referral = document.getElementById('referral').value;
                          var email = document.getElementById('email').value;
                          var college = document.getElementById('collegeName').value;

                          if(name == undefined || name == "") {
                            alert("Please Enter Your Name !!!");
                            return;
                          }

                          if(email == undefined || email == "") {
                            alert("Please Enter Your Email !!!");
                            return;
                          }

                          var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;

                          if(!filter.test(email))
                          {
                            alert("You have entered an invalid email address !!!")
                            return;
                          }

                          if(college == undefined || college == "") {
                            alert("Please Enter Your College Name !!!");
                            return;
                          }

                          var url2 = "/api/payment/findUser"
        // alert(url);
        var params2 = {
            email: email
        };
        var xmlHttp2 = new XMLHttpRequest();
        var flag = true;
        xmlHttp2.onreadystatechange = function(res) {
            if (xmlHttp2.readyState === 4) {
                res = JSON.parse(xmlHttp2.responseText);
                if(res.status === "failed") {
                  alert("Email Already Registered !!!");
                  flag = false;
                  return;
                }
            }
        }
        xmlHttp2.open("POST", url2, true);
        xmlHttp2.setRequestHeader("Content-type", "application/json");
        xmlHttp2.send(JSON.stringify(params2));

        
        var url = "https://linuxdiary.herokuapp.com/api/payment/order"
        // alert(url);
        var params = {
            amount: 100,
            currency: "INR",
            receipt: "linuxDiary3.0",
            payment_capture: '1'
        };
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = function(res) {
            if (xmlHttp.readyState === 4) {
                res = JSON.parse(xmlHttp.responseText);
                document.getElementById("rzp-text").value = res.sub.id;
                alert(res.sub.id);
                // alert("Aaya");
                // alert("Flag : " + flag);
                if(flag == false) return;
                rzpClick(e);
            }
        }
        xmlHttp.open("POST", url, true);
        xmlHttp.setRequestHeader("Content-type", "application/json");
        xmlHttp.send(JSON.stringify(params));
    }
                    </script>
                </div>
                </div>
                <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-12 box" id="right-side_form" >
                    <p id="right-side_form-head">Or check out these resources</p>
                    <div className="right-side_form-content">
                      <div id="container-1">
                        <div className='left-content'><i id="discord" class="fa-brands fa-discord"></i></div>
                        <div className='right-content'>
                        <a href="https://discord.gg/DsHGSEwJ8d" id="discord_link" target="_blank"><p id="discord_text">Join our discord server!</p></a>
                        </div>
                      </div>
                      <div id="container-2">
                        <div className='left-content'><i id="blogs" class="fa-solid fa-book"></i></div>
                        <div className='right-content'>
                        <a href="https://blog.wcewlug.org" id="blogs_link" target="_blank"><p id="blogs_text">Do read our blogs!</p></a>
                        </div>
                      </div>
                    </div>
                </div>
              </div>
            </div>
          </div>
          <div class="container-fluid" id="footer">
            <div class="row">
              <div class="d-flex flex-column col-xxl-4 col-lg-4 col-md-4 col-sm-12" id="footer_left-content">
                <p id="stay_connected">Stay Connected!</p>
                <div id="links">
                  <ul>
                    <li><a href="https://www.linkedin.com/company/wlug-club/" id="linkedin" target="_blank"><i class="fa-brands fa-linkedin"></i></a></li>
                    <li><a href="https://instagram.com/wcewlug?igshid=YmMyMTA2M2Y=" id="instagram" target="_blank"><i class="fa-brands fa-instagram"></i></a></li>
                    <li><a href="https://github.com/Walchand-Linux-Users-Group" id="github" target="_blank"><i class="fa-brands fa-github"></i></a></li>
                    <li><a href="https://mobile.twitter.com/wcewlug" id="twitter" target="_blank"><i class="fa-brands fa-twitter"></i></a></li>
                  </ul>
                </div>
                <p id="rights_reserved">© 2022 WCEWLUG, ALL RIGHTS RESERVED</p>
              </div>
              <div class="col-xxl-8 col-lg-8 col-md-8 col-sm-12" id="footer_right-content">
                <ul class="top-content">
                  <li><a href="#" id="home">Home</a></li>
                  <li><a href="https://www.wcewlug.org/" id="about_us" target="_blank">About Us</a></li>
                  <li><a href="https://www.wcewlug.org/index.php#contact" id="contact" target="_blank">Contact</a></li>
                </ul>
                <div id="important-links-container">
                  <ul class="bottom-content">
                    <li><a href="https://wiki.wcewlug.org/policies/privacy-policy" id="privacy_link" target="_blank">Privacy Policy&nbsp;&nbsp;|</a></li>
                    <li><a href="https://wiki.wcewlug.org/policies/terms-and-conditions" id="terms_and_conditions" target="_blank">Terms and Conditions&nbsp;&nbsp;|</a></li>
                    <li><a href="https://wiki.wcewlug.org/policies/cancellation-refund-policy" id="refund_policy" target="_blank">Cancellation/Refund Policy</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
    </div>
</body>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script>
    
    // $("#inputFirstName").on('change', function() {
    //     var value = $("#inputFirstName").value;
    //     alert(value);
    // })

    // function updateName() {
    //     alert("check");
    // }

    // document.getElementById("rzp-button1").onclick = function(e) {
        function rzpClick(e) {
            alert("Ha Click To Hua !!!");
        var options = {
            "key": "rzp_live_7Qavb1VhFIUu1u",
            "currency": "INR",
            "name": "LinuxDiary 3.0",
            "description": "WLUG LinuxDiary 3.0 Registration",
            "order_id": document.getElementById("rzp-text").value,
            "handler": function(response) {
                document.getElementById('order-pay-id').value = response.razorpay_payment_id;
                document.getElementById('order-id').value = response.razorpay_order_id;
                document.getElementById('order-sig').value = response.razorpay_signature;
                verifyClick();
            },
            "theme": {
                "color": "#0EB9F2"
            }
        };
        var rzp1 = new Razorpay(options);
        rzp1.open();
        e.preventDefault();
    }

    function incrementReferral(e) {
      var referral = document.getElementById('referral').value;
      if(referral != undefined && referral != "") {
          var url2 = "https://linuxdiary.herokuapp.com/api/payment/incrementReferral"
        // alert(url);
        var params2 = {
            referralCode: referral
        };
        var xmlHttp2 = new XMLHttpRequest();
        var flag = true;
        xmlHttp2.onreadystatechange = function(res) {
            if (xmlHttp2.readyState === 4) {
                res = JSON.parse(xmlHttp2.responseText);
            }
        }
        xmlHttp2.open("POST", url2, true);
        xmlHttp2.setRequestHeader("Content-type", "application/json");
        xmlHttp2.send(JSON.stringify(params2));
                          }
    }

    function register(e) {

        const name = document.getElementById("firstName").value;

        // const username = document.getElementById("userName").value;

        // const contact = document.getElementById("inputPhoneNumber").value;

        const email = document.getElementById("email").value;

        const college = document.getElementById("collegeName").value;
        
        // alert(name + " " + username);

        var url = 'https://linuxdiary.herokuapp.com/api/payment/register';

        var params = {
            name: name,
            // contact: contact,
            email: email,
            college: college
        }

        try {
            var xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = function(res) {
            if (xmlHttp.readyState === 4) {
                res = JSON.parse(xmlHttp.responseText);
                // alert(xmlHttp.responseText);
                // alert(xmlHttp.responseText);
                // if(res.user != undefined);
                incrementReferral(e);
                alert("Registration Successful !!! Kindly Check Your Mail For Payment Confirmation !!!");
                var obj = document.getElementById('successBox');
                var newContent = "<p>Registration Successfull !!!</p> <p> Your Referral Code : " + res.referralCode + "</p>" + "<br/><p>Confirmation Mail has been sent to you, Thanks For Registration !!!</p>";
                obj.innerHTML = newContent;
                // else {
                //     console.log(xmlHttp.response);
                //     alert("User Failed !!!")
                // }
            }
        }
        xmlHttp.open("POST", url, true); // false for synchronous request
        xmlHttp.setRequestHeader("Content-type", "application/json");
        xmlHttp.send(JSON.stringify(params));
        } catch(e) {
            alert(e.message);
            console.log(e.message);
        }


    }

    function verifyClick(e) {
        var url = 'https://linuxdiary.herokuapp.com/api/payment/verify';
        var params = {
            razorpay_order_id: document.getElementById('order-id').value,
            razorpay_payment_id: document.getElementById('order-pay-id').value,
            razorpay_signature: document.getElementById('order-sig').value
        };
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = function(res) {
            if (xmlHttp.readyState === 4) {
                alert(xmlHttp.responseText);
                register(e);
            }
        }
        xmlHttp.open("POST", url, true); // false for synchronous request
        xmlHttp.setRequestHeader("Content-type", "application/json");
        xmlHttp.send(JSON.stringify(params));
    }

    
</script>

</html>